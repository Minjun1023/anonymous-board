<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>로그인 성공</title>
    <script>
        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const token = urlParams.get('token');
            const accessToken = urlParams.get('accessToken');
            const refreshToken = urlParams.get('refreshToken');

            if (token) {
                // 새로운 JWT 토큰 방식
                console.log("JWT Token:", token);
                localStorage.setItem('jwtToken', token);
                console.log('소셜 로그인이 성공적으로 완료되었습니다.');
                window.location.href = '/';
            } else if (accessToken && refreshToken) {
                // 이전 방식 호환성 유지
                console.log("Access Token:", accessToken);
                console.log("Refresh Token:", refreshToken);
                
                // 토큰을 localStorage에 저장
                localStorage.setItem('accessToken', accessToken);
                localStorage.setItem('refreshToken', refreshToken);
                localStorage.setItem('jwtToken', accessToken); // jwtToken으로도 저장

                console.log('소셜 로그인이 성공적으로 완료되었습니다.');
                window.location.href = '/';
            } else {
                console.error('OAuth token not found in URL.');
                alert('로그인에 실패했습니다. (토큰 없음)');
                window.location.href = '/login';
            }
        };
    </script>
</head>
<body>
    <p>로그인 처리 중입니다. 잠시만 기다려주세요...</p>
</body>
</html>
